# DNS-cache

Запуск DNS-сервера
-
Откройте командную строку (Windows) или терминал (Linux) из папки с проектом. Введите команду: 
```python main.py```

Далее будет выведены сообщение об успешном запуске DNS-сервера и краткая инструкция по его использованию. Так как DNS-сервер слушает ```53``` порт на ```localhost 127.0.0.1```, то в отдельном окне cmd/терминала можно выполнить команду:
```dig google.com A @127.0.0.1```

DNS-сервер получит запрос и начнёт итеративно опрашивать NS-серверы, начиная с корневого ```198.41.0.4```. При этом в консоли будут последовательно выводиться сообщения о том, к каким серверам были отправлены запросы, а при получении авторитетного ответа будет показан результат выполнения команды.

Реализация
-
Используется ручное формирование запросов и ответов. Выделены необходимые классы в соответствии с ```RFC 1035```:
- ```Header Section``` - заговолочный раздел
- ```Question Section``` - вопросительный раздел
- ```Resource Record``` - ресурсная запись

Структура классов и их поля расписаны для удобства в комментариях в коде. Этих классов достаточно, чтобы ввести главную сущность ```Message``` - единый формат для обмена данными в рамках протокола DNS.

Также написан вспомогательный класс ```BytesSequenceReader```, умеющий читать и парсить последовательности байт для выделения классов, указанных выше.

Дополнительная функциональность
-
- Обслуживание нескольких клиентов (достигнуто за счёт многопоточности)
- Авторитетные ответы кэшируются с учётом TTL (см. модуль ```cache_worker.py```)
- При перезапуске DNS-сервера записи в кэше, у которых не истёк TTL, сохраняются в файле ```dns_cache.pickle```
